<?xml version="1.0" encoding="UTF-8" ?>
<!--
Part of OpenG2P. See LICENSE file for full copyright and licensing details.
-->
<odoo>    
    <!-- change oidc password wizard -->
    <record id="change_oidc_password_wizard_form_view" model="ir.ui.view">
        <field name="name">Change OIDC Password</field>
        <field name="model">spp.change.oidc.password.wizard</field>
        <field name="arch" type="xml">
            <form string="Change OIDC Password">
                <field mode="tree" name="partner_oidc_user_ids"/>
                <footer>
                    <button string="Change OIDC Password" name="change_oidc_password" type="object" class="btn-primary" data-hotkey="q"/>
                    <button string="Cancel" class="btn-secondary" special="cancel" data-hotkey="z" />
                </footer>
            </form>
        </field>
    </record>

    <record id="change_oidc_password_wizard_tree_view" model="ir.ui.view">
        <field name="name">Change OIDC Password</field>
        <field name="model">spp.change.oidc.password</field>
        <field name="arch" type="xml">
            <!-- the partner list is editable, but one cannot add or delete rows -->
            <tree string="Partners" editable="bottom" create="false" delete="false">
                <field name="partner_id" invisible="1" force_save="1"/>
                <field name="login"/>
                <field name="new_passwd" required="True" password="True"/>
            </tree>
        </field>
    </record>

    <record id="res_partner_act_server_change_oidc_password" model="ir.actions.server">
        <field name="name">Change OIDC Password</field>
        <field name="model_id" ref="spp_keycloak.model_spp_change_oidc_password_wizard"/>
        <field name="binding_model_id" ref="base.model_res_partner"/>
        <field name="state">code</field>
        <field name="code">action = model.open_wizard()</field>
    </record>

    <record id="res_partner_act_window_change_oidc_password" model="ir.actions.act_window">
        <field name="name">Change OIDC Password</field>
        <field name="res_model">spp.change.oidc.password.wizard</field>
        <field name="view_mode">form</field>
        <field name="target">new</field>
        <field name="view_id" ref="change_oidc_password_wizard_form_view"/>
        <field name="binding_model_id" ref="base.model_res_partner"/>
        <field name="binding_view_types">form</field>
    </record>
</odoo>
